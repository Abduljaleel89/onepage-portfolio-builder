/**
 * Internationalization (i18n) configuration
 */

const translations = {
  en: {
    common: {
      save: "Save",
      cancel: "Cancel",
      delete: "Delete",
      edit: "Edit",
      preview: "Preview",
      download: "Download",
      reset: "Reset",
      add: "Add",
      remove: "Remove",
      loading: "Loading...",
      generating: "Generating...",
      saved: "Saved",
      saving: "Saving...",
      error: "Error",
    },
    portfolio: {
      title: "Portfolio Builder",
      setup: "Your Portfolio Setup",
      profile: "Profile",
      name: "Name",
      headline: "Headline",
      bio: "Bio",
      profession: "Profession",
      avatar: "Profile Photo",
      uploadPhoto: "Upload Photo",
      changePhoto: "Change Photo",
      social: "Social Media Links",
      contact: "Contact",
      email: "Email",
      phone: "Phone",
      location: "Location",
      skills: "Skills & Technologies",
      addSkill: "Add Skill",
      experience: "Work Experience",
      addExperience: "Add Experience",
      education: "Education",
      addEducation: "Add Education",
      projects: "Projects",
      addProject: "Add Project",
      responsibilities: "Job Responsibilities",
      addResponsibility: "Add Responsibility",
      customSections: "Custom Sections",
      addCustomSection: "Add Custom Section",
      templates: "Portfolio Template",
      share: "Share Portfolio",
    },
    preview: {
      title: "Professional CV Preview",
      downloadPDF: "Download PDF",
      downloadDOCX: "Download DOCX",
      downloadHTML: "Download HTML",
      editPortfolio: "Edit Portfolio",
      professionalSummary: "Professional Summary",
      keyResponsibilities: "Key Responsibilities",
      technicalSkills: "Technical Skills",
      professionalExperience: "Professional Experience",
      education: "Education",
      projects: "Projects",
    },
    ai: {
      generate: "AI Generate",
      generating: "Generating...",
      optimize: "Optimize",
      optimizing: "Optimizing...",
      generateAll: "AI Generate All",
      describe: "AI Describe",
      failed: "AI generation failed",
    },
    social: {
      share: "Share",
      copyLink: "Copy Link",
      copied: "Copied",
      linkedin: "LinkedIn",
      twitter: "Twitter",
      facebook: "Facebook",
      email: "Email",
    },
  },
  es: {
    common: {
      save: "Guardar",
      cancel: "Cancelar",
      delete: "Eliminar",
      edit: "Editar",
      preview: "Vista previa",
      download: "Descargar",
      reset: "Restablecer",
      add: "Agregar",
      remove: "Eliminar",
      loading: "Cargando...",
      generating: "Generando...",
      saved: "Guardado",
      saving: "Guardando...",
      error: "Error",
    },
    portfolio: {
      title: "Constructor de Portafolio",
      setup: "Configuración de tu Portafolio",
      profile: "Perfil",
      name: "Nombre",
      headline: "Título",
      bio: "Biografía",
      profession: "Profesión",
      avatar: "Foto de Perfil",
      uploadPhoto: "Subir Foto",
      changePhoto: "Cambiar Foto",
      social: "Enlaces de Redes Sociales",
      contact: "Contacto",
      email: "Correo Electrónico",
      phone: "Teléfono",
      location: "Ubicación",
      skills: "Habilidades y Tecnologías",
      addSkill: "Agregar Habilidad",
      experience: "Experiencia Laboral",
      addExperience: "Agregar Experiencia",
      education: "Educación",
      addEducation: "Agregar Educación",
      projects: "Proyectos",
      addProject: "Agregar Proyecto",
      responsibilities: "Responsabilidades Laborales",
      addResponsibility: "Agregar Responsabilidad",
      customSections: "Secciones Personalizadas",
      addCustomSection: "Agregar Sección Personalizada",
      templates: "Plantilla de Portafolio",
      share: "Compartir Portafolio",
    },
    preview: {
      title: "Vista Previa de CV Profesional",
      downloadPDF: "Descargar PDF",
      downloadDOCX: "Descargar DOCX",
      downloadHTML: "Descargar HTML",
      editPortfolio: "Editar Portafolio",
      professionalSummary: "Resumen Profesional",
      keyResponsibilities: "Responsabilidades Clave",
      technicalSkills: "Habilidades Técnicas",
      professionalExperience: "Experiencia Profesional",
      education: "Educación",
      projects: "Proyectos",
    },
    ai: {
      generate: "Generar con IA",
      generating: "Generando...",
      optimize: "Optimizar",
      optimizing: "Optimizando...",
      generateAll: "Generar Todo con IA",
      describe: "Describir con IA",
      failed: "Error en la generación con IA",
    },
    social: {
      share: "Compartir",
      copyLink: "Copiar Enlace",
      copied: "Copiado",
      linkedin: "LinkedIn",
      twitter: "Twitter",
      facebook: "Facebook",
      email: "Correo Electrónico",
    },
  },
  fr: {
    common: {
      save: "Enregistrer",
      cancel: "Annuler",
      delete: "Supprimer",
      edit: "Modifier",
      preview: "Aperçu",
      download: "Télécharger",
      reset: "Réinitialiser",
      add: "Ajouter",
      remove: "Retirer",
      loading: "Chargement...",
      generating: "Génération...",
      saved: "Enregistré",
      saving: "Enregistrement...",
      error: "Erreur",
    },
    portfolio: {
      title: "Créateur de Portfolio",
      setup: "Configuration de votre Portfolio",
      profile: "Profil",
      name: "Nom",
      headline: "Titre",
      bio: "Biographie",
      profession: "Profession",
      avatar: "Photo de Profil",
      uploadPhoto: "Télécharger une Photo",
      changePhoto: "Changer la Photo",
      social: "Liens des Réseaux Sociaux",
      contact: "Contact",
      email: "E-mail",
      phone: "Téléphone",
      location: "Localisation",
      skills: "Compétences et Technologies",
      addSkill: "Ajouter une Compétence",
      experience: "Expérience Professionnelle",
      addExperience: "Ajouter une Expérience",
      education: "Éducation",
      addEducation: "Ajouter une Éducation",
      projects: "Projets",
      addProject: "Ajouter un Projet",
      responsibilities: "Responsabilités Professionnelles",
      addResponsibility: "Ajouter une Responsabilité",
      customSections: "Sections Personnalisées",
      addCustomSection: "Ajouter une Section Personnalisée",
      templates: "Modèle de Portfolio",
      share: "Partager le Portfolio",
    },
    preview: {
      title: "Aperçu du CV Professionnel",
      downloadPDF: "Télécharger PDF",
      downloadDOCX: "Télécharger DOCX",
      downloadHTML: "Télécharger HTML",
      editPortfolio: "Modifier le Portfolio",
      professionalSummary: "Résumé Professionnel",
      keyResponsibilities: "Responsabilités Clés",
      technicalSkills: "Compétences Techniques",
      professionalExperience: "Expérience Professionnelle",
      education: "Éducation",
      projects: "Projets",
    },
    ai: {
      generate: "Générer avec IA",
      generating: "Génération...",
      optimize: "Optimiser",
      optimizing: "Optimisation...",
      generateAll: "Tout Générer avec IA",
      describe: "Décrire avec IA",
      failed: "Échec de la génération IA",
    },
    social: {
      share: "Partager",
      copyLink: "Copier le Lien",
      copied: "Copié",
      linkedin: "LinkedIn",
      twitter: "Twitter",
      facebook: "Facebook",
      email: "E-mail",
    },
  },
  ar: {
    common: {
      save: "حفظ",
      cancel: "إلغاء",
      delete: "حذف",
      edit: "تعديل",
      preview: "معاينة",
      download: "تحميل",
      reset: "إعادة تعيين",
      add: "إضافة",
      remove: "إزالة",
      loading: "جاري التحميل...",
      generating: "جاري الإنشاء...",
      saved: "تم الحفظ",
      saving: "جاري الحفظ...",
      error: "خطأ",
    },
    portfolio: {
      title: "منشئ المحفظة",
      setup: "إعداد محفظتك",
      profile: "الملف الشخصي",
      name: "الاسم",
      headline: "العنوان",
      bio: "السيرة الذاتية",
      profession: "المهنة",
      avatar: "صورة الملف الشخصي",
      uploadPhoto: "رفع صورة",
      changePhoto: "تغيير الصورة",
      social: "روابط وسائل التواصل الاجتماعي",
      contact: "جهات الاتصال",
      email: "البريد الإلكتروني",
      phone: "الهاتف",
      location: "الموقع",
      skills: "المهارات والتقنيات",
      addSkill: "إضافة مهارة",
      experience: "الخبرة العملية",
      addExperience: "إضافة خبرة",
      education: "التعليم",
      addEducation: "إضافة تعليم",
      projects: "المشاريع",
      addProject: "إضافة مشروع",
      responsibilities: "المسؤوليات الوظيفية",
      addResponsibility: "إضافة مسؤولية",
      customSections: "أقسام مخصصة",
      addCustomSection: "إضافة قسم مخصص",
      templates: "قالب المحفظة",
      share: "مشاركة المحفظة",
    },
    preview: {
      title: "معاينة السيرة الذاتية المهنية",
      downloadPDF: "تحميل PDF",
      downloadDOCX: "تحميل DOCX",
      downloadHTML: "تحميل HTML",
      editPortfolio: "تعديل المحفظة",
      professionalSummary: "الملخص المهني",
      keyResponsibilities: "المسؤوليات الرئيسية",
      technicalSkills: "المهارات التقنية",
      professionalExperience: "الخبرة المهنية",
      education: "التعليم",
      projects: "المشاريع",
    },
    ai: {
      generate: "إنشاء بالذكاء الاصطناعي",
      generating: "جاري الإنشاء...",
      optimize: "تحسين",
      optimizing: "جاري التحسين...",
      generateAll: "إنشاء الكل بالذكاء الاصطناعي",
      describe: "وصف بالذكاء الاصطناعي",
      failed: "فشل إنشاء الذكاء الاصطناعي",
    },
    social: {
      share: "مشاركة",
      copyLink: "نسخ الرابط",
      copied: "تم النسخ",
      linkedin: "لينكد إن",
      twitter: "تويتر",
      facebook: "فيسبوك",
      email: "البريد الإلكتروني",
    },
  },
};

let currentLanguage = "en";

export function setLanguage(lang) {
  if (translations[lang]) {
    currentLanguage = lang;
    if (typeof window !== "undefined") {
      window.localStorage.setItem("portfolio-language", lang);
      document.documentElement.lang = lang;
    }
  }
}

export function getLanguage() {
  if (typeof window !== "undefined") {
    const stored = window.localStorage.getItem("portfolio-language");
    if (stored && translations[stored]) {
      currentLanguage = stored;
    }
  }
  return currentLanguage;
}

export function t(key, defaultValue = "") {
  const keys = key.split(".");
  let value = translations[currentLanguage] || translations.en;

  for (const k of keys) {
    value = value?.[k];
    if (value === undefined) {
      // Fallback to English
      value = translations.en;
      for (const k2 of keys) {
        value = value?.[k2];
        if (value === undefined) return defaultValue || key;
      }
      return value || defaultValue || key;
    }
  }

  return value || defaultValue || key;
}

export function getAvailableLanguages() {
  return Object.keys(translations).map((code) => ({
    code,
    name: getLanguageName(code),
  }));
}

function getLanguageName(code) {
  const names = {
    en: "English",
    es: "Español",
    fr: "Français",
    ar: "العربية",
  };
  return names[code] || code;
}

// Initialize language on load
if (typeof window !== "undefined") {
  getLanguage();
  document.documentElement.lang = currentLanguage;
}

